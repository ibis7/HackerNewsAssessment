<h1>HackerNews Stories</h1>

<form class="search-form">
  <mat-form-field class="full-width">
    <input
      matInput
      #searchInput
      placeholder="Search"
      [formControl]="searchControl"
      (onchange)="searchTextChanged($event)"
      maxlength="100"
    />
  </mat-form-field>
</form>

<!--Info from https://material.angular.dev/components/table/overview-->
<div class="table-container">
  <table
    mat-table
    matSort
    [dataSource]="stories"
    (matSortChange)="sortChange($event)"
    class="mat-elevation-z8"
  >
    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>ID</th>
      <td mat-cell *matCellDef="let story">{{ story.id }}</td>
    </ng-container>

    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
      <td mat-cell *matCellDef="let story">{{ story.title || "-" }}</td>
    </ng-container>

    <ng-container matColumnDef="url">
      <th mat-header-cell *matHeaderCellDef mat-sort-header>URL</th>
      <td mat-cell *matCellDef="let story">
        @if (story.url) {
          <a [href]="story.url" target="_blank">{{ story.url }}</a>
        } @else {
          <span>â€”</span>
        }
      </td>
    </ng-container>

    <tr
      mat-header-row
      *matHeaderRowDef="displayedColumns"
      matHeaderRowDefSticky
    ></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <mat-paginator
    [pageSizeOptions]="pageSizeOptions"
    (page)="changePaging($event)"
    showFirstLastButtons
  />
</div>
